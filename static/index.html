<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dotfiles Config & Template Sharing</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ Dotfiles Config Sharing</h1>
            <p>Discover and share development environment configurations and templates</p>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="switchTab('configs')">üìÅ Configurations</button>
            <button class="nav-tab" onclick="switchTab('templates')">üìã Templates</button>
            <button class="nav-tab" onclick="switchTab('create-template')">‚ûï Create Template</button>
        </div>

        <!-- Configurations Section -->
        <div id="configs-section" class="content-section active">
            <div class="upload-instructions">
                <details>
                    <summary>üì§ How to Upload Your Config</summary>
                    <div class="instructions-content">
                        <h3>1. Share via CLI (Recommended)</h3>
                        <p>Use your dotfiles CLI tool to share your configuration:</p>
                        <code>dotfiles share gist --name="My Setup" --description="My awesome dev config" --author="yourname"</code>

                        <h3>2. Share via API</h3>
                        <p>Upload directly using the API:</p>
                        <code>curl -X POST ${window.location.origin}/api/configs/upload \
  -H "Content-Type: application/json" \
  -d '{
    "name": "My Configuration",
    "description": "Description of my setup",
    "author": "Your Name",
    "tags": ["web-dev", "python"],
    "config": "{\"brews\": [\"git\", \"curl\"], \"casks\": [\"vscode\"], \"taps\": [], \"stow\": [\"vim\"]}",
    "public": true
  }'</code>

                        <h3>3. Export from CLI</h3>
                        <p>First export your config to a file, then upload manually:</p>
                        <code>dotfiles list --json > my-config.json</code>
                    </div>
                </details>
            </div>

            <div class="stats" id="stats">
                <div class="stat-card">
                    <h3>Total Configs</h3>
                    <div class="number" id="total-configs">-</div>
                </div>
                <div class="stat-card">
                    <h3>Public Configs</h3>
                    <div class="number" id="public-configs">-</div>
                </div>
                <div class="stat-card">
                    <h3>Total Downloads</h3>
                    <div class="number" id="total-downloads">-</div>
                </div>
            </div>

            <div class="search-box">
                <input type="text" id="search" placeholder="Search configurations by name, description, or tags...">
            </div>

            <div id="configs-container">
                <div class="loading">Loading configurations...</div>
            </div>
        </div>

        <!-- Templates Section -->
        <div id="templates-section" class="content-section">
            <div class="search-box">
                <input type="text" id="template-search" placeholder="Search templates by name, description, or tags...">
                <br><br>
                <div class="form-row">
                    <div class="form-group">
                        <input type="text" id="template-tags" placeholder="Filter by tags (comma-separated)">
                    </div>
                    <div class="form-group">
                        <select id="template-featured">
                            <option value="">All Templates</option>
                            <option value="true">Featured Only</option>
                            <option value="false">Non-Featured Only</option>
                        </select>
                    </div>
                </div>
            </div>

            <div id="templates-container">
                <div class="loading">Loading templates...</div>
            </div>
        </div>

        <!-- Create Template Section -->
        <div id="create-template-section" class="content-section">
            <div class="template-form">
                <h2>Create New Template</h2>
                <form id="template-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="template-name">Name*</label>
                            <input type="text" id="template-name" required>
                        </div>
                        <div class="form-group">
                            <label for="template-author">Author*</label>
                            <input type="text" id="template-author" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="template-description">Description</label>
                        <textarea id="template-description"></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="template-version">Version</label>
                            <input type="text" id="template-version" placeholder="1.0.0">
                        </div>
                        <div class="form-group">
                            <label for="template-tags-input">Tags (comma-separated)</label>
                            <input type="text" id="template-tags-input" placeholder="web-dev, frontend, backend">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="template-brews">Homebrew Packages (comma-separated)</label>
                            <textarea id="template-brews" placeholder="git, node, python3"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="template-casks">Homebrew Casks (comma-separated)</label>
                            <textarea id="template-casks" placeholder="visual-studio-code, google-chrome"></textarea>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="template-taps">Homebrew Taps (comma-separated)</label>
                            <input type="text" id="template-taps" placeholder="homebrew/cask-fonts">
                        </div>
                        <div class="form-group">
                            <label for="template-stow">Stow Packages (comma-separated)</label>
                            <input type="text" id="template-stow" placeholder="vim, git, zsh">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="template-extends">Extends Template ID</label>
                            <input type="text" id="template-extends" placeholder="base-template">
                        </div>
                        <div class="form-group">
                            <label for="template-overrides">Overrides (comma-separated)</label>
                            <input type="text" id="template-overrides" placeholder="brews, casks">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="checkbox-group">
                            <input type="checkbox" id="template-public" checked>
                            <label for="template-public">Public Template</label>
                        </div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="template-add-only">
                            <label for="template-add-only">Add Only (Don't Replace)</label>
                        </div>
                    </div>

                    <button type="submit" class="submit-btn">Create Template</button>
                </form>
            </div>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>